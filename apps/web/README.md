# Subscription Buddy (åˆè³¼å¤¥ä¼´)

![Vue.js](https://img.shields.io/badge/Vue.js-3.0+-green.svg)
![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue.svg)
![Vite](https://img.shields.io/badge/Vite-Ready-blue.svg)
![Firebase](https://img.shields.io/badge/Firebase-Enabled-orange.svg)
![License](https://img.shields.io/badge/License-MIT-yellow.svg)

**Subscription Buddy** æ˜¯ä¸€å€‹å°ˆç‚ºå°‹æ‰¾ä¸²æµåª’é«”åˆè³¼å¤¥ä¼´æ‰“é€ çš„åª’åˆå¹³å°ã€‚è§£æ±ºäº†ã€Œæ‰¾ä¸åˆ°äººåˆ†æ“” Netflix / Spotify å®¶åº­æ–¹æ¡ˆã€çš„ç—›é»ï¼Œæä¾›ä¸€å€‹å®‰å…¨ã€é€æ˜ä¸”å³æ™‚çš„åª’åˆç’°å¢ƒã€‚

---

## ğŸŒŸ å°ˆæ¡ˆäº®é» (Project Highlights)

* **âš¡ æ¥µè‡´æ•ˆèƒ½**: åŸºæ–¼ **Vite + Vue 3** æ§‹å»ºï¼Œç§’ç´šè¼‰å…¥ï¼Œæµæš¢çš„ SPA é«”é©—ã€‚
* **ğŸ›¡ï¸ å®‰å…¨å„ªå…ˆ**: å¯¦ä½œ **E2E Encryption** (ç«¯å°ç«¯åŠ å¯†) èˆ‡ **GDPR** è³‡æ–™è‡ªä¸»æ¬Šï¼Œé”åˆ°ä¼æ¥­ç´šè³‡å®‰æ¨™æº–ã€‚
* **ğŸ“± å®Œç¾é©é…**: æ”¯æ´ **PWA** (Progressive Web App)ï¼Œå…·å‚™ iOS ç€æµ·é©é…ã€æ‰‹å‹¢æ“ä½œèˆ‡é›¢ç·šå­˜å–èƒ½åŠ›ã€‚
* **ğŸ’¬ å³æ™‚äº’å‹•**: æ•´åˆ **Firebase Firestore** å¯¦ä½œå³æ™‚èŠå¤©å®¤ï¼Œç„¡é ˆé‡æ–°æ•´ç†é é¢ã€‚
* **ğŸŒ å…¨é¢åœ‹éš›åŒ–**: å…§å»ºå®Œæ•´ **i18n** æ”¯æ´ (ç¹é«”ä¸­æ–‡/English)ï¼Œç„¡ Hardcoded å­—ä¸²ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹è‰² (Features)

* **èº«åˆ†é©—è­‰**: æ”¯æ´ Email/Password è¨»å†Šç™»å…¥èˆ‡ Google å¿«é€Ÿç™»å…¥ (OAuth)ã€‚
* **æ‹¼åœ˜å»£å ´**:
  * **é–‹åœ˜**: å¿«é€Ÿç™¼èµ· Netflix, Disney+, Spotify ç­‰æœå‹™çš„åˆè³¼åœ˜ã€‚
  * **æœå°‹**: æ”¯æ´æ¨¡ç³Šæœå°‹ (Fuzzy Search)ï¼Œå³æ™‚æ‰¾åˆ°æ„Ÿèˆˆè¶£çš„æ‹¼åœ˜ã€‚
  * **ç‹€æ…‹**: è‡ªå‹•åˆ¤æ–·ã€Œæ‹›å‹Ÿä¸­ã€ã€ã€Œå·²æ»¿åœ˜ã€æˆ–ã€Œå·²çµåœ˜ã€ã€‚
* **éš±ç§é€šè¨Š**:
  * **E2EE**: èŠå¤©å®¤è¨Šæ¯æ¡ç”¨ **RSA + AES** æ··åˆåŠ å¯†ï¼Œä¼ºæœå™¨ç„¡æ³•çªºæ¢å…§å®¹ã€‚
  * **å®‰å…¨æ€§**: æ”¯æ´è¨Šæ¯ç™¼é€ã€åŠ å…¥/é€€å‡ºé€šçŸ¥ã€‚
* **ä¿¡è­½è©•åƒ¹**: äº¤æ˜“å®Œæˆå¾Œäº’è©•æ©Ÿåˆ¶ï¼Œå»ºç«‹ç¤¾ç¾¤ä¿¡ä»»åº¦ã€‚
* **å€‹è³‡è‡ªä¸»**: æ”¯æ´ä¸€éµåŒ¯å‡ºå€‹äººè³‡æ–™ (JSON) èˆ‡å¾¹åº•åˆªé™¤å¸³è™Ÿ (Right to be Forgotten)ã€‚

---

## ğŸ’ ç¨‹å¼ç¢¼å“è³ª (Code Quality)

æœ¬å°ˆæ¡ˆåš´æ ¼éµå¾ªç¾ä»£å‰ç«¯é–‹ç™¼è¦ç¯„ï¼š

* **Type Safety**: å…¨é¢å°å…¥ **TypeScript**ï¼Œæä¾›åš´æ ¼çš„å‹åˆ¥æª¢æŸ¥ã€‚
* **Architecture**: åš´æ ¼éµå®ˆ **View - Store - Service** åˆ†å±¤æ¶æ§‹ï¼Œé‚è¼¯æ¸…æ™°ã€‚
* **Linting / Formatting**: æ•´åˆ **ESLint**, **Prettier** èˆ‡ **Husky** (Git Hooks)ï¼Œç¢ºä¿ç¨‹å¼ç¢¼ä¸€è‡´æ€§ã€‚
* **Testing**: åŒ…å« **Vitest** (å–®å…ƒæ¸¬è©¦) èˆ‡ **Playwright** (E2E æ¸¬è©¦)ã€‚
* **Accessibility**: ç¬¦åˆ **WCAG 2.1** æ¨™æº–ï¼Œä¸¦é€šé `pa11y-ci` è‡ªå‹•åŒ–ç¨½æ ¸ã€‚
* **CI/CD Ready**: åŒ…å« Dockerfile èˆ‡å¥åº·æª¢æŸ¥æŒ‡ä»¤ï¼Œæ”¯æ´å®¹å™¨åŒ–éƒ¨ç½²ã€‚

---

## ğŸš€ å¿«é€Ÿé–‹å§‹ (Quick Start)

### 1. å®‰è£ä¾è³´

æœ¬å°ˆæ¡ˆæ¡ç”¨ **Monorepo** æ¶æ§‹ï¼Œè«‹ç¢ºä¿å®‰è£ `pnpm`ï¼š

```bash
npm install -g pnpm
pnpm install
```

### 2. ç’°å¢ƒè¨­å®š

è¤‡è£½ç¯„ä¾‹è¨­å®šæª”ä¸¦å¡«å…¥æ‚¨çš„ Firebase Configï¼š

```bash
cp apps/web/.env.example apps/web/.env
```

### 3. å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨

```bash
pnpm dev
# é€™å°‡åŒæ™‚å•Ÿå‹• Web App èˆ‡ Cloud Functions (æ¨¡æ“¬å™¨)
```

ç€è¦½å™¨æ‰“é–‹ `http://localhost:5173` å³å¯çœ‹è¦‹ç•«é¢ã€‚

---

## ğŸ“± æ”¯æ´å¹³å° (Supported Platforms)

| Platform | Support Type | Details |
| :--- | :--- | :--- |
| **Web** | Modern Browsers | Chrome, Firefox, Safari, Edge |
| **Android** | PWA / TWA | æ”¯æ´ add-to-home screen, TWA æ‰“åŒ…ä¸Šæ¶ Play Store |
| **iOS** | PWA / WebClip | æ”¯æ´ Safari add-to-home, Fullscreen display (manifest) |
| **Desktop** | Web / Electron | éŸ¿æ‡‰å¼ç¶²é ï¼Œæœªä¾†å¯å°è£ç‚º Electron App |

---

## ğŸ› ï¸ æŠ€è¡“å †ç–Š (Technology Stack)

| Category | Technology | Description |
| :--- | :--- | :--- |
| **Language** | TypeScript | Strong Typing & Modern ES Features |
| **Frontend** | Vue 3 | Composition API |
| | Vite | Next Generation Frontend Tooling |
| | TailwindCSS | Utility-first CSS Framework (Dark Mode support) |
| | Pinia | Intuitive State Management |
| | Vue I18n | Internationalization plugin |
| **Backend** | Firebase | Auth, Firestore, Hosting, Analytics |
| **Security** | Web Crypto API | Native Browser Cryptography for E2EE |
| **PWA** | vite-plugin-pwa | Offline Support & Installable |
| **Testing** | Vitest | Blazing Fast Unit Test Framework |
| | Playwright | Reliable End-to-End Testing |
| **DevOps** | Docker | Containerization |

---

## ğŸ—ï¸ å°ˆæ¡ˆçµæ§‹ (Project Structure)

pnpm-workspace.yaml
apps/
â”œâ”€â”€ web/            # å‰ç«¯æ‡‰ç”¨ (Vue 3 + Vite)
â”œâ”€â”€ functions/      # å¾Œç«¯å‡½æ•¸ (Firebase Cloud Functions)
packages/
â””â”€â”€ core/           # å…±ç”¨æ ¸å¿ƒé‚è¼¯ (Auth, Services, Types)
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ schemas/    # Zod é©—è­‰ Schema
    â”‚   â”œâ”€â”€ services/   # å•†æ¥­é‚è¼¯æœå‹™å±¤
    â”‚   â”œâ”€â”€ types/      # TypeScript å‹åˆ¥å®šç¾©
    â”‚   â””â”€â”€ utils/      # å…±ç”¨å·¥å…·å‡½å¼ (Logger, Constants)

---

## ğŸ“– é–‹ç™¼æŒ‡å— (Development Guide)

1. **æ–°å¢é é¢**: åœ¨ `src/views` å»ºç«‹ `.vue` æª”ï¼Œä¸¦æ–¼ `src/router/index.js` è¨»å†Šè·¯ç”±ã€‚
2. **æ–°å¢ç‹€æ…‹**: åœ¨ `src/stores` å»ºç«‹ Storeï¼Œè™•ç†å…¨åŸŸè³‡æ–™æµã€‚
3. **è³‡æ–™å­˜å–**: æ‰€æœ‰è³‡æ–™åº«æ“ä½œè«‹å¯«åœ¨ `src/services`ï¼Œç¦æ­¢åœ¨ Component ç›´æ¥å‘¼å« Firebase SDKã€‚
4. **æ¨£å¼é–‹ç™¼**: å„ªå…ˆä½¿ç”¨ Tailwind Utility Classesï¼Œç‰¹æ®Šéœ€æ±‚æ‰å¯«åœ¨ `<style>`.
5. **æäº¤è¦ç¯„**: éµå¾ª **Conventional Commits** (e.g. `feat: add chat`, `fix: login error`)ã€‚

---

## ğŸ§ª æ¸¬è©¦ (Testing)

### Web æ¸¬è©¦

* **å–®å…ƒæ¸¬è©¦**: `npm test` (Vitest)
* **E2E æ¸¬è©¦**: `npx playwright test`

### Mobile æ¸¬è©¦ (Android/iOS)

å»ºè­°ä½¿ç”¨çœŸå¯¦è£ç½®æˆ–æ¨¡æ“¬å™¨é€²è¡Œé©—è­‰ï¼Œç‰¹åˆ¥é—œæ³¨ï¼š

1. **PWA å®‰è£**: æª¢æŸ¥ Manifest æ˜¯å¦æ­£ç¢ºè¼‰å…¥ã€‚
2. **å®‰å…¨å€åŸŸ**: æª¢æŸ¥åŠ‰æµ· (Notch) èˆ‡ Home Indicator æ˜¯å¦é®æ“‹å…§å®¹ (Safe Area)ã€‚
3. **æ‰‹å‹¢æ“ä½œ**: æ¸¬è©¦ Pull-to-Refresh èˆ‡æ»‘å‹•é †æš¢åº¦ã€‚

---

## ğŸ“¦ æ‰“åŒ…ç™¼å¸ƒ (Build & Publish)

### Web / PWA

å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬ (è‡ªå‹•ç”Ÿæˆ Service Worker):

```bash
npm run build
```

ç”¢ç‰©ä½æ–¼ `dist/` è³‡æ–™åº«ï¼Œå¯ç›´æ¥éƒ¨ç½²è‡³ Firebase Hosting æˆ– Nginxã€‚

### Android (APK)

ä½¿ç”¨ **Bubblewrap** æˆ– **Trusted Web Activities (TWA)** å°‡ PWA æ‰“åŒ…ç‚º APK:

```bash
# éœ€å®‰è£ bubblewrap
bubblewrap init --manifest=https://your-domain.com/manifest.webmanifest
bubblewrap build
```

### iOS (WebClip/IPA)

iOS ä¸»è¦é€é Safari "Add to Home Screen" å®‰è£ã€‚è‹¥éœ€ä¸Šæ¶ App Storeï¼Œéœ€é€é **Cordova** æˆ– **Capacitor** å°è£ Web Appã€‚

---

## ğŸ“š API æ–‡ä»¶èˆ‡æ¸¬è©¦ (API Documentation)

æœ¬å°ˆæ¡ˆæ¡ç”¨ **Serverless** æ¶æ§‹ï¼Œæ ¸å¿ƒé‚è¼¯å°è£æ–¼å‰ç«¯ Service Layerï¼š

* **AuthService**: `src/services/authService.ts` - è™•ç†ç™»å…¥ã€è¨»å†Šã€ç™»å‡ºã€‚
* **GroupService**: `src/services/groupService.ts` - æ‹¼åœ˜ CRUD èˆ‡æœå°‹ã€‚
* **ChatService**: `src/services/ChatService.ts` - èŠå¤©å®¤ç®¡ç† (æ”¯æ´ E2EE Payload è™•ç†)ã€‚
* **CryptoService**: `src/services/CryptoService.ts` - è² è²¬ RSA/AES åŠ è§£å¯†é‹ç®—ã€‚
* **PrivacyService**: `src/services/PrivacyService.ts` - GDPR è³‡æ–™åŒ¯å‡ºèˆ‡åˆªé™¤ã€‚

æ¸¬è©¦ç­–ç•¥å»ºè­°é‡å°ä¸Šè¿° Service æ’°å¯« Integration Tests (é€£æ¥ Firebase Emulator)ã€‚

---

## ğŸ›¡ï¸ å®‰å…¨é˜²è­· (Security Ops)

### å®¹å™¨å¼±é»æƒæ (Container Scanning)

æœ¬å°ˆæ¡ˆé›†æˆäº† [Trivy](https://aquasecurity.github.io/trivy/) ä»¥ç¢ºä¿äº¤ä»˜çš„ Docker Image å®‰å…¨ç„¡è™ã€‚

**å‰ç½®éœ€æ±‚**: è«‹å®‰è£ Trivy (Windows: `winget install -e --id AquaSecurity.Trivy` æˆ– `choco install trivy`)

**åŸ·è¡Œæƒæ**:

```bash
npm run scan:image
```

é€™å°‡è‡ªå‹•åŸ·è¡Œï¼š

1. å»ºç½®ç”Ÿç”¢ç’°å¢ƒ Docker Image (`subscription-buddy:latest`)
2. æƒæ Image ä¸­çš„ OS å¥—ä»¶èˆ‡ Application ä¾è³´æ¼æ´
3. è¼¸å‡º CVE å ±å‘Š (è«‹å„ªå…ˆä¿®å¾© `CRITICAL` èˆ‡ `HIGH` ç­‰ç´šæ¼æ´)

---

## ğŸ”® æœªä¾†è¦åŠƒ (Future Roadmap)

åŸºæ–¼å°ˆæ¡ˆç¾æ³èˆ‡æœªä¾†æ“´å±•éœ€æ±‚ï¼Œæˆ‘å€‘æ“¬å®šä»¥ä¸‹åˆ†éšæ®µå„ªåŒ–è—åœ–ï¼š

#### ğŸ› ï¸ é–‹ç™¼é«”é©—èˆ‡æ¶æ§‹ (DevEx & Architecture)

1. **æ¶æ§‹æ¨¡çµ„åŒ– (Monorepo Refactoring)** `[V3]`
    * **æè¿°**: ç•¶å•†æ¥­é‚è¼¯è¤‡é›œåŒ–æ™‚ï¼Œå°‡ `core` (Model/Service) èˆ‡ `ui` (View) åˆ†é›¢ç‚ºä¸åŒ Packageã€‚
    * **æ•ˆç›Š**: æå‡ç·¨è­¯é€Ÿåº¦ï¼Œä¸¦å…è¨±é‚è¼¯åœ¨ä¸åŒå°ˆæ¡ˆ (å¦‚ Admin å¾Œå°) é–“å…±ç”¨ã€‚

2. **æ¶æ§‹æ±ºç­–è¨˜éŒ„ (Architecture Decision Records - ADR)** `[P2]`
    * **æè¿°**: å»ºç«‹ `doc/adr` ç›®éŒ„ï¼Œè¨˜éŒ„æ‰€æœ‰é‡å¤§æ¶æ§‹æ±ºç­–çš„èƒŒæ™¯ã€é¸é …èˆ‡å¾Œæœ (Core Rules 9.5)ã€‚
    * **æ•ˆç›Š**: ä¿å­˜æ¶æ§‹æ¼”é€²è„ˆçµ¡ï¼Œé¿å…åœ˜éšŠæˆå“¡é‡è¤‡è¾¯è«–å·²æ±ºå®šçš„è­°é¡Œã€‚

3. **è¨­è¨ˆç³»çµ±æ–‡ä»¶åŒ– (Design System Documentation)** `[P2]`
    * **æè¿°**: å®Œå–„ **Storybook**ï¼Œå»ºç«‹è‰²å½©ã€æ’ç‰ˆèˆ‡å…ƒä»¶åº«çš„æ¨™æº–ä½¿ç”¨æ–‡ä»¶ (Core Rules 4.1)ã€‚
    * **æ•ˆç›Š**: ç¢ºä¿ UI/UX ä¸€è‡´æ€§ï¼Œé™ä½æ–°é€²é–‹ç™¼è€…ä¸Šæ‰‹é–€æª»ã€‚

4. **æ¶æ§‹åˆ†å±¤å¼·åˆ¶æª¢æ¸¬ (Strict Layer Enforcement)** `[P2]`
    * **æè¿°**: å¼•å…¥ **Dependency Cruiser**ï¼Œæ–¼ CI éšæ®µå¼·åˆ¶æª¢æŸ¥ä¾è³´é—œä¿‚ (e.g. ç¦æ­¢ View ç›´æ¥ import Service)ã€‚
    * **æ•ˆç›Š**: é˜²æ­¢æ¶æ§‹è…åŒ– (Architecture Erosion)ï¼Œç¶­æŒå°ˆæ¡ˆé•·æœŸå¯ç¶­è­·æ€§ã€‚

5. **è¤‡é›œåº¦ç›£æ§ (Cognitive Complexity Monitoring)** `[P3]`
    * **æè¿°**: è¨­å®š SonarCloud é–¥å€¼ï¼Œå¼·åˆ¶å–®ä¸€å‡½å¼ Cognitive Complexity < 15 (Core Rules 1.1)ã€‚
    * **æ•ˆç›Š**: é™ä½ä»£ç¢¼é–±è®€è² æ“”ï¼Œæ¸›å°‘é‚è¼¯éŒ¯èª¤æ»‹ç”Ÿã€‚

#### ğŸ›¡ï¸ å®‰å…¨æ€§èˆ‡ç¶­é‹ (Security & DevOps)

1. **è‡ªå‹•åŒ–å‚™ä»½èˆ‡é‚„åŸæ¼”ç·´ (Automated Backup & DR)** `[V3]`
    * **æè¿°**: è¨­å®š Cloud Scheduler å®šæœŸå‚™ä»½ Firestore è‡³ Cloud Storageï¼Œä¸¦æ’°å¯«é‚„åŸè…³æœ¬ã€‚
    * **æ•ˆç›Š**: ç¬¦åˆä¼æ¥­ç´šå‚™æ´ç­–ç•¥ (Backup Strategy)ï¼Œç¢ºä¿ç½é›£ç™¼ç”Ÿæ™‚çš„ RTO/RPO é”æ¨™ã€‚

2. **é›¶ä¿¡ä»»æ¶æ§‹ (Zero Trust - App Check)** `[V3]`
    * **æè¿°**: å…¨é¢å•Ÿç”¨ **Firebase App Check**ï¼Œé©—è­‰æµé‡ä¾†æºæ˜¯å¦ç‚ºåˆæ³•çš„ App æˆ– Web å®¢æˆ¶ç«¯ (Security Rules 1).
    * **æ•ˆç›Š**: æœ‰æ•ˆé˜»æ“‹éæ³•çš„ API çˆ¬èŸ²èˆ‡æœªç¶“æˆæ¬Šçš„å¾Œç«¯å­˜å–ã€‚

3. **è³‡æ–™åº«é·ç§»ç‰ˆæœ¬æ§åˆ¶ (Database Migration Versioning)** `[V3]`
    * **å‚™è¨»**: å·²è¦ç•«å¯¦ä½œè¨ˆç•« (Node.js Runner)ï¼Œä½†å»¶å¾Œè‡³ V3 åŸ·è¡Œã€‚
    * **æè¿°**: æ’°å¯« Node.js è…³æœ¬é…åˆ CI/CDï¼Œå° Firestore é€²è¡Œè³‡æ–™çµæ§‹è®Šæ›´çš„ç‰ˆæœ¬æ§åˆ¶ (Backend Rules 4.5)ã€‚
    * **æ•ˆç›Š**: ç¢ºä¿æ‰€æœ‰ç’°å¢ƒ (Dev/Staging/Prod) çš„è³‡æ–™çµæ§‹ä¸€è‡´ï¼Œä¸¦æ”¯æ´è‡ªå‹•åŒ–å›æ»¾ (Rollback)ã€‚

4. **é›²ç«¯é‡‘é‘°ç®¡ç† (Cloud Secret Manager)** `[V3]`
    * **æè¿°**: ç§»é™¤ `.env` æª”æ¡ˆä¸­çš„æ©Ÿæ•è³‡è¨Šï¼Œæ”¹æ¥ Google Secret Manager æˆ– AWS Parameter Store (Core Rules 2.1)ã€‚
    * **æ•ˆç›Š**: æœçµ•é‡‘é‘°èª¤ä¸Šå‚³ Git çš„é¢¨éšªï¼Œä¸¦æ”¯æ´é‡‘é‘°è¼ªæ›¿ (Rotation) èˆ‡å¯©è¨ˆã€‚

5. **æäº¤å‰æ©Ÿæ•è³‡æ–™æƒæ (Pre-commit Secret Scanning)** `[V3]`
    * **æè¿°**: è¨­å®š **GitHooks** (ä½¿ç”¨ **git-secrets** æˆ– **detect-secrets**)ï¼Œåœ¨ Commit éšæ®µæ””æˆªæ½›åœ¨çš„ API Key æˆ–å¯†ç¢¼ (SecOps).
    * **æ•ˆç›Š**: æ§‹å»ºç¬¬ä¸€é“é˜²ç·šï¼Œé˜²æ­¢æ©Ÿæ•è³‡æ–™æ±™æŸ“ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ã€‚

6. **è‡ªå‹•åŒ–å‹•æ…‹å¼±é»æƒæ (DAST - OWASP ZAP)** `[V3]`
    * **æè¿°**: æ–¼ CI/CD Pipeline æ•´åˆ **OWASP ZAP**ï¼Œå°æ¸¬è©¦ç’°å¢ƒé€²è¡Œè‡ªå‹•åŒ–æ»²é€æ¸¬è©¦ (Enterprise Security).
    * **æ•ˆç›Š**: ææ—©ç™¼ç¾ SQL Injectionã€XSS ç­‰ runtime å¾Œæ‰é¡¯ç¾çš„å®‰å…¨æ¼æ´ã€‚

#### ğŸ§ª æ¸¬è©¦èˆ‡å“è³ªä¿è­‰ (Testing & QA)

1. **å…¨é¢å–®å…ƒæ¸¬è©¦è¦†è“‹ (Unit Testing Coverage)** `[P1]`
    * **æè¿°**: æå‡æ ¸å¿ƒå•†æ¥­é‚è¼¯ (Composables, Services) çš„æ¸¬è©¦è¦†è“‹ç‡è‡³ > 80% (Core Rules 10.1)ã€‚
    * **æ•ˆç›Š**: é™ä½å›æ­¸éŒ¯èª¤é¢¨éšªï¼Œå»ºç«‹ç©©å›ºçš„æŒçºŒäº¤ä»˜æµæ°´ç·š (CI Pipeline)ã€‚

2. **è¦–è¦ºå›æ­¸æ¸¬è©¦ (Visual Regression Testing)** `[P2]`
    * **æè¿°**: æ–¼ CI æµç¨‹æ•´åˆ **Percy** æˆ– **Chromatic**ï¼Œè‡ªå‹•åµæ¸¬ UI æ¨£å¼èˆ‡ä½ˆå±€çš„éé æœŸè®Šæ›´ (Frontend Rules 2).
    * **æ•ˆç›Š**: ç¢ºä¿ä¸åŒç€è¦½å™¨èˆ‡è£ç½®é–“çš„ UI ä¸€è‡´æ€§ (Pixel-Perfect)ï¼Œé˜²æ­¢æ¨£å¼å´©å£ã€‚

3. **çªè®Šæ¸¬è©¦ (Mutation Testing)** `[P3]`
    * **æè¿°**: ä½¿ç”¨ **StrykerJS** ä¿®æ”¹ç¨‹å¼ç¢¼é‚è¼¯ä¸¦åŸ·è¡Œæ¸¬è©¦ï¼Œé©—è­‰æ¸¬è©¦å€‹æ¡ˆæ˜¯å¦èƒ½æŠ“å‡ºéŒ¯èª¤ (Testing Rules).
    * **æ•ˆç›Š**: æ‰¾å‡ºã€Œè¦†è“‹ç‡é«˜ä½†ç„¡æ•ˆã€çš„æ¸¬è©¦ï¼Œç¢ºä¿æ¸¬è©¦å¥—ä»¶çš„çœŸå¯¦å“è³ªã€‚

4. **è‡ªå‹•åŒ–ç„¡éšœç¤™å®ˆé–€å“¡ (Automated Accessibility Guardrails)** `[P1]`
    * **æè¿°**: å°‡ `pa11y-ci` æ•´åˆè‡³ Git Pre-commit Hook æˆ– CI Pipelineï¼Œå¼·åˆ¶é˜»æ“‹ä¸ç¬¦åˆ WCAG 2.1 AA çš„æäº¤ (Frontend Rules 4).
    * **æ•ˆç›Š**: ç¢ºä¿ç”¢å“å°æ‰€æœ‰ä½¿ç”¨è€… (å«èº«éšœäººå£«) çš„å‹å–„åº¦ï¼Œé™ä½æ³•å¾‹è¨´è¨Ÿé¢¨éšªã€‚

5. **æ··æ²Œå·¥ç¨‹æ¼”ç·´ (Chaos Engineering)** `[P3]`
    * **æè¿°**: åœ¨æ¸¬è©¦ç’°å¢ƒæ¨¡æ“¬ç¶²è·¯å»¶é²ã€æœå‹™ç•¶æ©Ÿç­‰æ¥µç«¯ç‹€æ³ (e.g. ä½¿ç”¨ **Chaos Mesh**) (Enterprise Rules 4.3).
    * **æ•ˆç›Š**: é©—è­‰ç³»çµ±çš„è‡ªæˆ‘ç™’åˆèƒ½åŠ› (Self-Healing) èˆ‡é™ç´šç­–ç•¥ (Fallback Strategies) æ˜¯å¦æœ‰æ•ˆã€‚

#### ğŸ“Š å¯è§€æ¸¬æ€§ (Observability)

1. **é›†ä¸­å¼éŒ¯èª¤è¿½è¹¤ (Centralized Error Tracking)** `[V3]`
    * **å‚™è¨»**: å·²è¦ç•«å¯¦ä½œè¨ˆç•« (GCP Error Reporting)ï¼Œä½†å»¶å¾Œè‡³ V3 åŸ·è¡Œã€‚
    * **æè¿°**: æ•´åˆ Sentry æˆ– Firebase Crashlyticsï¼Œå³æ™‚æ•ç²å‰ç«¯ Runtime Errors èˆ‡ API ç•°å¸¸ã€‚
    * **æ•ˆç›Š**: æå‡ MTTR (å¹³å‡ä¿®å¾©æ™‚é–“)ï¼Œä¸»å‹•ç™¼ç¾ä½¿ç”¨è€…é­é‡çš„é«”é©—å•é¡Œã€‚

2. **åˆ†æ•£å¼è¿½è¹¤ (OpenTelemetry)** `[P1]`
    * **æè¿°**: å°å…¥ OpenTelemetry æ¨™æº–ï¼Œä¸²è¯å‰å¾Œç«¯èˆ‡ Firebase æœå‹™çš„ Request Trace ID (Core Rules 8.2)ã€‚
    * **æ•ˆç›Š**: å¯è¦–åŒ–è·¨æœå‹™çš„å‘¼å«è·¯å¾‘ï¼Œå¿«é€Ÿå®šä½æ•ˆèƒ½ç“¶é ¸èˆ‡éŒ¯èª¤æ ¹æºã€‚

3. **æ™ºæ…§å‘Šè­¦æ•´åˆ (Automated Alerting Integration)** `[V3]`
    * **å‚™è¨»**: å·²è¦ç•«å¯¦ä½œè¨ˆç•« (GCP Monitoring Policies)ï¼Œä½†å»¶å¾Œè‡³ V3 åŸ·è¡Œã€‚
    * **æè¿°**: è¨­å®š PrometheusAlert æˆ– PagerDutyï¼Œé‡å°é—œéµæŒ‡æ¨™ (å¦‚ Error Rate > 1%) ç™¼é€å³æ™‚é€šçŸ¥ (Core Rules 8.4)ã€‚
    * **æ•ˆç›Š**: ç¸®çŸ­äº‹æ•…éŸ¿æ‡‰æ™‚é–“ (MTTA)ï¼Œå¯¦ç¾ 7x24 å°æ™‚çš„ä¸»å‹•ç¶­é‹ç›£æ§ã€‚

4. **å¯è¦–åŒ–ç›£æ§å„€è¡¨æ¿ (Grafana Dashboards)** `[P2]`
    * **æè¿°**: æ­å»º Grafana çœ‹æ¿ï¼Œå°‡ Prometheus æŒ‡æ¨™èˆ‡ OpenTelemetry æ•¸æ“šè¦–è¦ºåŒ– (Core Rules 8.1)ã€‚
    * **æ•ˆç›Š**: æä¾›ç¶­é‹åœ˜éšŠ (SRE) ä¸€ç›®ç­ç„¶çš„ç³»çµ±å¥åº·ç‹€æ…‹å¤§å±ã€‚

5. **çœŸå¯¦ç”¨æˆ¶ç›£æ§ (RUM - Real User Monitoring)** `[P2]`
    * **æè¿°**: æ”¶é›†ä¸¦åˆ†æçœŸå¯¦ä½¿ç”¨è€…çš„ Core Web Vitals (LCP, FID, CLS) æ•¸æ“š (Frontend Rules 2).
    * **æ•ˆç›Š**: äº†è§£ä¸åŒè£ç½®èˆ‡ç¶²è·¯ç’°å¢ƒä¸‹çš„å¯¦éš›é«”é©—ï¼Œè€Œéåƒ…ä¾è³´å¯¦é©—å®¤æ•¸æ“š (Lighthouse)ã€‚

#### ğŸš€ æ¥µè‡´æ•ˆèƒ½å„ªåŒ– (Advanced Performance)

1. **SSR / SSG æ¶æ§‹é·ç§» (Server-Side Rendering)** `[P2]`
    * **æè¿°**: è©•ä¼°é·ç§»è‡³ **Nuxt 3** æˆ–å°å…¥ **Vite SSR**ã€‚
    * **æ•ˆç›Š**: é¡¯è‘—æå‡ SEO æ’åèˆ‡ First Contentful Paint (FCP) æŒ‡æ¨™ï¼Œå„ªåŒ–ç¤¾ç¾¤åˆ†äº«é è¦½ (OG Tags)ã€‚

2. **PWA å†·å•Ÿå‹•å„ªåŒ– (Cold Start Optimization)** `[P1]`
    * **æè¿°**: é‡å°è¡Œå‹•è£ç½®é€²è¡Œ Profile åˆ†æï¼Œç¢ºä¿ TTI (Time to Interactive) < 2 ç§’ (Mobile Rules 4)ã€‚
    * **æ•ˆç›Š**: æå‡ App ç´šåˆ¥çš„æµæš¢åº¦ï¼Œé™ä½ä½¿ç”¨è€…è·³å‡ºç‡ã€‚

3. **æ·±åº¦é€£çµæ•´åˆ (Deep Linking Integration)** `[P2]`
    * **æè¿°**: å¯¦ä½œ **Universal Links (iOS)** èˆ‡ **App Links (Android)**ï¼Œè®“åˆ†äº«é€£çµç›´æ¥å–šèµ· App ç‰¹å®šé é¢ (Mobile Rules).
    * **æ•ˆç›Š**: å„ªåŒ–è¡ŒéŠ·æ¼æ–—èˆ‡ä½¿ç”¨è€…é«”é©—ï¼Œæå‡å¤–éƒ¨æµé‡è½‰åŒ–ç‡ã€‚

4. **ç”Ÿç‰©è¾¨è­˜ç™»å…¥ (WebAuthn / Passkeys)** `[P3]`
    * **æè¿°**: å°å…¥ **WebAuthn** æ¨™æº–ï¼Œæ”¯æ´ FaceID / TouchID é€²è¡Œç„¡å¯†ç¢¼ç™»å…¥ (Security Rules 2.5)ã€‚
    * **æ•ˆç›Š**: æå‡ç™»å…¥é«”é©—èˆ‡å¸³è™Ÿå®‰å…¨æ€§ï¼Œé™ä½é‡£é­šæ”»æ“Šé¢¨éšªã€‚

5. **èªç³»è³‡æºæ‡¶åŠ è¼‰ (i18n Lazy Loading)** `[P2]`
    * **æè¿°**: å°‡å¤šåœ‹èªç³»æª”æ‹†åˆ†ç‚ºç¨ç«‹ Chunkï¼Œåƒ…åœ¨ä½¿ç”¨è€…åˆ‡æ›èªè¨€æ™‚å‹•æ…‹è¼‰å…¥ã€‚
    * **æ•ˆç›Š**: æ¸›å°‘åˆå§‹ Bundle Sizeï¼ŒåŠ å¿«é¦–å±è¼‰å…¥é€Ÿåº¦ (FCP)ã€‚

6. **æ•ˆèƒ½å®ˆé–€å“¡ (Lighthouse CI Guardrails)** `[P1]`
    * **æè¿°**: æ–¼ CI Pipeline å¼·åˆ¶åŸ·è¡Œ Lighthouse æª¢æ¸¬ï¼Œè‹¥ Score < 90 å‰‡é˜»æ“‹ Merge (Frontend Rules 2)ã€‚
    * **æ•ˆç›Š**: æœçµ•æ•ˆèƒ½é€€åŒ– (Performance Regression)ï¼Œç¢ºä¿æ‡‰ç”¨ç¨‹å¼å§‹çµ‚ä¿æŒé«˜æ•ˆèƒ½æ¨™æº–ã€‚

7. **åœ–ç‰‡è‡ªå‹•å„ªåŒ–ç®¡é“ (Automated Image Optimization)** `[P2]`
    * **æè¿°**: åˆ©ç”¨ Cloud Functions è§¸ç™¼å™¨ï¼Œåœ¨ä½¿ç”¨è€…ä¸Šå‚³åœ–ç‰‡æ™‚è‡ªå‹•è½‰æª”ç‚º **WebP/AVIF** ä¸¦ç”Ÿæˆå¤šç¨®å°ºå¯¸ (Frontend Rules 2.2)ã€‚
    * **æ•ˆç›Š**: å¤§å¹…æ¸›å°‘å‚³è¼¸æµé‡ï¼Œæå‡ LCP (Largest Contentful Paint) æ•ˆèƒ½æŒ‡æ¨™ã€‚

8. **CDN é‚Šç·£å¿«å–ç­–ç•¥ (Edge Caching Strategy)** `[P1]`
    * **æè¿°**: ç²¾ç´°é…ç½® Firebase Hosting çš„ `Cache-Control` æ¨™é ­ï¼Œå°‡éœæ…‹è³‡æºå¿«å–æ–¼å…¨çƒé‚Šç·£ç¯€é» (Performance Rules).
    * **æ•ˆç›Š**: æœ€å°åŒ–ä¼ºæœå™¨å›æºè«‹æ±‚ï¼Œå¯¦ç¾å…¨çƒæ¯«ç§’ç´šçš„å…§å®¹å‚³éã€‚

9. **æ‰“åŒ…é«”ç©é ç®— (Bundle Size Budget)** `[P2]`
    * **æè¿°**: æ–¼ Vite é…ç½® `performance.maxAssetSize`ï¼Œè‹¥å–®ä¸€ Chunk è¶…é 300KB å‰‡æ§‹å»ºå¤±æ•— (Frontend Rules 3)ã€‚
    * **æ•ˆç›Š**: å»ºç«‹ç¡¬æ€§æ•ˆèƒ½é–€æª» (Performance Budget)ï¼Œé˜²æ­¢éš¨è‘—åŠŸèƒ½è¿­ä»£å°è‡´çš„é«”ç©è†¨è„¹ã€‚

10. **å‰ç«¯éŒ¯èª¤é‚Šç•Œ (Frontend Error Boundaries)** `[P1]`
    * **æè¿°**: åˆ©ç”¨ Vue 3 `onErrorCaptured` hook å¯¦ä½œå…ƒä»¶ç´šéŒ¯èª¤éš”é›¢ï¼Œé¿å…å–®ä¸€çµ„ä»¶å´©æ½°å°è‡´ç™½å± (Genral Principles 3).
    * **æ•ˆç›Š**: é¡¯è‘—æå‡æ‡‰ç”¨ç¨‹å¼éŸŒæ€§ (Resilience)ï¼Œæä¾›å„ªé›…çš„é™ç´š UI (Graceful Degradation)ã€‚

11. **æ–·è·¯å™¨æ¨¡å¼ (Circuit Breaker Pattern)** `[P1]`
    * **æè¿°**: æ–¼å‰ç«¯ Service Layer å¯¦ä½œ **Circuit Breaker** (ä½¿ç”¨ **Opossum**)ï¼Œç•¶å¾Œç«¯éŒ¯èª¤ç‡éé«˜æ™‚è‡ªå‹•ç†”æ–· (Enterprise Resilience).
    * **æ•ˆç›Š**: é˜²æ­¢é›ªå´©æ•ˆæ‡‰ (Cascading Failures)ï¼Œä¸¦æä¾›å³æ™‚çš„ Fallback å›æ‡‰ï¼Œä¿è­·å¾Œç«¯æœå‹™ã€‚

---

---

## ğŸ“ æœ€æ–°æ›´æ–° (Latest Updates)

### Security Enhancements (2026-01-18)

* **API Rate Limiting**:
  * å…¨é¢å•Ÿç”¨ **Firebase App Check** (reCAPTCHA Enterprise)ï¼Œé˜»æ“‹éç€è¦½å™¨æµé‡ã€‚
  * å¯¦ä½œ **Firestore Timestamp Guard**ï¼Œå¼·åˆ¶æ ¡é©—ä¼ºæœå™¨æ™‚é–“ (`request.time`)ã€‚
* **Container Security**:
  * æ•´åˆ **Trivy** å®¹å™¨å¼±é»æƒæå·¥å…· (`npm run scan:image`)ã€‚
  * å„ªåŒ– Dockerfile å»ºç½®æµç¨‹ï¼Œä¿®å¾©èˆ‡ `vue-tsc` çš„ç›¸å®¹æ€§å•é¡Œã€‚
* **Type Safety & Bug Fixes**:
  * ä¿®å¾© `ChatService` èˆ‡ `GroupStore` çš„ TypeScript å‹åˆ¥å®šç¾©ã€‚
  * è§£æ±º Service Worker èˆ‡ PWA (`ExtendableEvent`) çš„å…¨åŸŸå‹åˆ¥è¡çªã€‚

### Security Hardening (2026-01-25)

* **Code Security & Compliance**:
  * ä¿®å¾© 13+ **SonarCloud Security Hotspots**ï¼Œé”æˆ Quality Gate 100% é€šéã€‚
  * ç§»é™¤ Git ä¸­èª¤å‚³çš„ç·¨è­¯æª”æ¡ˆ (`apps/functions/lib`)ï¼Œæ¶ˆé™¤æ½›åœ¨çš„ ReDoS èˆ‡ Weak Cryptography é¢¨éšªã€‚
  * å¼·åŒ– **Secrets Management**ï¼Œä¿®å¾©å–®å…ƒæ¸¬è©¦ä¸­çš„ Hardcoded Credentialsã€‚
* **Infrastructure Security**:
  * å•Ÿç”¨ Google Cloud Storage **Versioning** (ç‰ˆæœ¬æ§åˆ¶) èˆ‡ **Access Logging** (å­˜å–æ—¥èªŒ)ã€‚
  * æ›´æ–° `firestore.rules`ï¼Œå¼·åˆ¶ `/groups` èˆ‡ `/users` éœ€é©—è­‰èº«åˆ† (`request.auth != null`) æ‰å¯è®€å–ã€‚
* **Application Security**:
  * å¯¦ä½œ **Secure Headers** (Helmet)ï¼Œç¦ç”¨ `X-Powered-By`ã€‚
  * éƒ¨ç½² **Content Security Policy (CSP)** æ–¼ `index.html`ã€‚
  * ä¿®å¾©å‰ç«¯ `target="_blank"` çš„ Reverse Tabnabbing æ¼æ´ (`rel="noopener noreferrer"`)ã€‚
  * ä¿®å¾© Logger Regexï¼Œé˜²ç¯„ **ReDoS** æ”»æ“Šã€‚

### Roadmap Features Implementation (2026-01-25)

* **Data Lifecycle (GDPR)**:
  * å¯¦ä½œ **Firestore TTL** (`apps/web/infra/terraform`), è¨­å®š `expireAt` è‡ªå‹•æ¸…ç†éæœŸæ—¥èªŒ (30å¤©) èˆ‡é€šçŸ¥ (90å¤©)ã€‚
  * ç³»çµ±è‡ªå‹•åŒ–éµå¾ªè³‡æ–™æœ€å°åŒ–åŸå‰‡ï¼Œç„¡éœ€é¡å¤–ç¶­è­·æˆæœ¬ã€‚
* **Quality Assurance**:
  * å°å…¥ **Pact** (Contract Testing) æ–¼ CI æµç¨‹ï¼Œç¢ºä¿å‰å¾Œç«¯ API å¥‘ç´„ä¸€è‡´æ€§ã€‚
  * å»ºç«‹ Consumer (`apps/web`) èˆ‡ Provider (`apps/functions`) é›™å‘é©—è­‰æ©Ÿåˆ¶ã€‚
* **Feature Management**:
  * æ•´åˆ **Firebase Remote Config** (`configService.ts`)ï¼Œå¯¦ä½œåŠŸèƒ½é–‹é—œèˆ‡ç°åº¦ç™¼å¸ƒèƒ½åŠ›ã€‚

### Advanced Features Implementation (2026-01-25)

* **Documentation & API**:
  * å¯¦ä½œ **Automated API Docs** (`tsoa` + `Swagger UI`)ï¼Œç¢ºä¿æ–‡ä»¶èˆ‡ç¨‹å¼ç¢¼åŒæ­¥ã€‚
* **User Engagement**:
  * å¯¦ä½œ **Web Push Notifications** (FCM + Service Worker)ï¼Œæ”¯æ´é›¢ç·šèƒŒæ™¯æ¨æ’­ã€‚
* **Data Intelligence**:
  * æ•´åˆ **BigQuery Warehouse** (Firebase Extensions)ï¼Œæ”¯æ´ SQL å³æ™‚åˆ†æã€‚
* **Architecture**:
  * å°å…¥ **Event-Driven Architecture** (Pub/Sub)ï¼Œè§£è€¦æ ¸å¿ƒé‚è¼¯èˆ‡ Side Effectsã€‚

### Security & Ops Implementation (2026-01-25)

* **Ops Excellence**:
  * å¯¦ä½œ **Cloud Budget Monitoring** (Terraform) èˆ‡ **Disaster Recovery** å‚™ä»½è…³æœ¬ã€‚
  * å¯¦ä½œ **Graceful Shutdown** æ©Ÿåˆ¶ï¼Œç¢ºä¿æœå‹™å¹³æ»‘é‡å•Ÿã€‚
* **Compliance & Safety**:
  * æ•´åˆ **License Compliance Scanning** (`license-checker`) æ–¼ CI æµç¨‹ã€‚
  * å¯¦ä½œ **AI Content Moderation** (Cloud Vision)ï¼Œè‡ªå‹•éæ¿¾ä¸ç•¶åœ–ç‰‡ã€‚

## ğŸ‘¤ ä½œè€… (Author)

**Presentyourlove**

---

## â¤ï¸ è‡´è¬ (Acknowledgment)

* æ„Ÿè¬ **Vue.js** èˆ‡ **Vite** åœ˜éšŠæä¾›å„ªç§€çš„é–‹ç™¼é«”é©—ã€‚
* æ„Ÿè¬ **Firebase** æä¾›å¼·å¤§çš„å¾Œç«¯åŸºç¤è¨­æ–½ã€‚
* ç‰¹åˆ¥æ„Ÿè¬é–‹æºç¤¾ç¾¤æä¾›çš„å„ªç§€ UI å…ƒä»¶èˆ‡å·¥å…·åº«ã€‚
